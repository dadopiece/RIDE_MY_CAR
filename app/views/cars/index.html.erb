<div class="py-4 px-3 bg-white shadow" style="position: sticky; top: 0; z-index: 10">
  <%= form_tag cars_path, method: :get, class: "d-flex justify-content-evenly align-items-center" do %>
    <div class="form-group">
      <%= label_tag :brand, 'Marque', style: "font-weight: bold;" %>
      <%= text_field_tag :brand, params[:brand], class: "form-control", placeholder: "Enter the brand", style: "font-weight: light;" %>
    </div>

    <div class="form-group">
      <%= label_tag :model, 'ModÃ¨le', style: "font-weight: bold;" %>
      <%= text_field_tag :model, params[:model], class: "form-control", placeholder: "Enter the model", style: "font-weight: light;" %>
    </div>

 <div class="form-group">
      <%= label_tag :address, 'Address', style: "font-weight: bold;" %>
      <%= text_field_tag :address, params[:address], class: "form-control", placeholder: "Enter address", style: "font-weight: light;" %>
    </div>

    <div class="form-group">
      <%= label_tag :max_price, 'Price Max â‚¬â‚¬', style: "font-weight: bold;" %>
      <%= number_field_tag :max_price, params[:max_price], class: "form-control", placeholder: "Enter the price max", style: "font-weight: light;" %>
    </div>

    <%= submit_tag 'Filtrer', class: "btn btn-primary" %>
  <% end %>
</div>

<div class="container mt-3">
<h4 class="px-5 py-5"> LIST ðŸ“‹ : </h4>
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
    <% @cars.each do |car| %>
      <div class="col">
        <div class="card h-100">
          <% if car.photo.attached? %>
            <%= cl_image_tag car.photo.key, height: 300, width: 300, crop: :fill, class: "card-img-top" %>
          <% else %>
            Pas d'image
          <% end %>
          <div class="card-body">
            <h5 class="card-title"><%= car.brand %> <%= car.model %></h5>
            <p class="card-text">
              <!-- Vous pouvez ajouter plus de dÃ©tails ici -->
              Quelques dÃ©tails supplÃ©mentaires sur la voiture ici.
            </p>
            <p class="card-text">
              <strong><%= number_to_currency(car.price, unit: "â‚¬", delimiter: " ", format: "%n %u par jour") %></strong>
            </p>
          </div>
          <div class="card-footer">
            <%= link_to "RÃ©server", car_path(car), class: "btn btn-primary" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>

<div class="px-5 py-5">
  <div data-controller="togglableElement" class="mt-5">
    <button data-action="click->toggle#fire" class="btn btn-outline-primary"></button>
      <div style="margin-top: 50px; width: 100%; height: 600px;"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
        </div>
    </div>
</div>
